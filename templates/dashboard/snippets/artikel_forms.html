{% extends 'dashboard/base.html' %}
{% load static %}
{% block content %}
  <div class="content">
    <div class="row">
        <div class="col-md-12">
            <div class="card ">
            <form method="POST" class="form-horizontal" enctype="multipart/form-data">
              {% csrf_token %}  
              <div class="card-header ">
                <h4 class="card-title">{{ title }}</h4>
              </div>
              <div class="card-body ">
                  <div class="row">
                    <label class="col-sm-2 col-form-label">Judul</label>
                    <div class="col-sm-10">
                      <div class="form-group">{{ forms.judul }}</div>
                    </div>
                    <label class="col-sm-2 col-form-label">Isi Artikel</label>
                    <div class="col-sm-10">
                      <div class="form-group">{{ forms.isi }}</div>
                    </div>
                    <label class="col-sm-2 col-form-label">Kategori</label>
                    <div class="col-sm-10">
                      <div class="form-group">{{ forms.kategori }}</div>
                  </div>
                  <label class="col-sm-2 col-form-label">Thumbnail</label>
                    <div class="col-sm-10">{{ forms.thumbnail }}</div>
              </div>
              <div class="card-footer text-right">
                <button class="btn btn-success">Simpan</button>
              </div>
            </form>
            </div>
          </div>
        </div>
      </div>
{% endblock content %}

{% block js %}
<!-- CKEditor 4 from CDN (more stable) -->
<script src="https://cdn.ckeditor.com/4.22.1/standard-all/ckeditor.js"></script>
<script type="text/javascript">
    // Wait for DOM to be fully loaded
    window.addEventListener('load', function() {
        // Destroy any existing instances first
        if (typeof CKEDITOR !== 'undefined') {
            for (var instance in CKEDITOR.instances) {
                CKEDITOR.instances[instance].destroy(true);
            }
            
            // Find the textarea with id_isi
            var textarea = document.querySelector('textarea[name="isi"]');
            if (textarea) {
                // Replace with CKEditor
                CKEDITOR.replace(textarea, {
                    height: 400,
                    removePlugins: 'image', // Remove conflict plugins
                    toolbar: [
                        { name: 'document', items: [ 'Source' ] },
                        { name: 'clipboard', items: [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo' ] },
                        { name: 'editing', items: [ 'Find', 'Replace', '-', 'SelectAll' ] },
                        '/',
                        { name: 'basicstyles', items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },
                        { name: 'paragraph', items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock' ] },
                        { name: 'links', items: [ 'Link', 'Unlink' ] },
                        '/',
                        { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize' ] },
                        { name: 'colors', items: [ 'TextColor', 'BGColor' ] },
                        { name: 'tools', items: [ 'Maximize' ] }
                    ]
                });
                console.log('CKEditor initialized successfully');
            } else {
                console.error('Textarea not found');
            }
        }
    });
</script>
{% endblock %}
